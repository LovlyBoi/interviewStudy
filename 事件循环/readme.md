# 事件循环

### 进程线程和异步

##### 进程

当一个应用程序运行时, 需要使用内存和CPU资源, 这些资源需要向操作系统申请, 操作系统以进程的方式来分配这些资源, 一个进程就代表着一块独立于其他进程的内存空间。

一个应用程序要运行, 必须至少有一个进程启动。

进程的最大特点就是独立, 一个进程不能随意的访问其他进程的资源, 这就保证了多个程序在操作系统上运行互不干扰

##### 线程

任何一个进程在启动的时候, 操作系统都会给他分配一个线程, 应用程序的入口函数在主线程中运行, 在应用程序的运行过程中, 可能有多个任务需要同时执行, 于是可以向操作系统申请来分配更多的线程来执行不同的任务

比如 浏览器启动以后, 会开启多个线程来处理不同的事情

- 事件监听线程
- GUI线程
- 计时器线程
- 网络线程
- JS执行线程

和进程不一样的是: 线程之间的资源不是隔离的, 他们可以共享数据, 并且线程可以被调度。比如浏览器中的执行线程和GUI线程就是被调度为互斥的, 当GUI线程进行渲染时, 执行线程会被阻塞, 反之亦然, 所以在下面的代码中你是看不到页面有任何改变的

```js
function test() {
    div.innerHTML = "123";
    while(true) {}
}
```

**我们所说的JS是单线程的, 主要是说JS的执行线程只有一个, 不过现在也可以用web worker来开启多个线程了**

##### 异步

单线程的主要优势就是不需要考虑线程的调度, 降低了程序的复杂性

但在单线程中如果要处理需要等待的任务时, 就必须要考虑阻塞的问题, 比如我们去请求一个数据, 如果网路线程是同步的话, 那么如果网络线程需要一天的时间才能返回数据, 则我们的JS主线程也会等待一天, 这就是阻塞, 所以, JS引入了异步的概念来优化这种场景


